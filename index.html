<!DOCTYPE html>
<html>

<head>
    <title>Spin</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html,
        body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            background: #111;
            cursor: pointer;
            user-select: none;
        }

        #background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: blur(40px) brightness(0.4);
            transform: scale(1.05);
            z-index: 0;
        }

        #spinner {
            position: relative;
            z-index: 1;
            width: 800px;
            height: 800px;
            margin: auto;
            top: 50%;
            transform: translateY(-50%);
            border: 5px solid white;
        }

        #spinner img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            image-rendering: -moz-crisp-edges;
            image-rendering: -webkit-optimize-contrast;
        }
    </style>
</head>

<body>
    <img id="background" src="images/1.png" alt="Background">
    <div id="spinner">
        <img id="currentImage" src="images/1.png" alt="Image">
    </div>

    <script>
        const images = [];
        for (let i = 1; i <= 19; i++) {
            images.push(`images/${i}.png`);
        }

        const img = document.getElementById('currentImage');
        const bg = document.getElementById('background');
        let spinning = false;

        function easeOutCubic(t) {
            return 1 - Math.pow(1 - t, 3);
        }

        function spin() {
            if (spinning) return;
            spinning = true;

            const start = performance.now();
            const totalDuration = 2000;

            const currentIndex = images.indexOf(img.src.split('/').pop());
            const extraSpins = 3;
            const finalIndex = Math.floor(Math.random() * images.length);

            // total steps = full spins + offset to final image
            const totalSteps = extraSpins * images.length + finalIndex;

            function animate(now) {
                const elapsed = now - start;
                const t = Math.min(elapsed / totalDuration, 1);
                const eased = easeOutCubic(t);

                const step = Math.floor(eased * totalSteps);
                const index = (currentIndex + step) % images.length;

                img.src = images[index];
                bg.src = images[index];

                if (t < 1) {
                    requestAnimationFrame(animate);
                } else {
                    spinning = false;
                }
            }

            requestAnimationFrame(animate);
        }




        document.body.addEventListener('click', spin);
    </script>
</body>

</html>